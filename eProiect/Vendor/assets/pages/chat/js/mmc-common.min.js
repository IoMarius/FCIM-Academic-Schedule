"use strict";var placeholder='<span class="placeholder">{0}</span>';function ActiveChatBox(a){$("#main-chat .chat-single-box").removeClass("active");$(a).addClass("active")}function removeBoxCollapseClass(a){if($(a).hasClass("collapsed")){$(a).removeClass("collapsed")}}function messageScroll(){setTimeout(function(){if($(".messages div").length==0){return}$(".message-scrooler").animate({scrollTop:$(".messages div:last").offset().top},0)},100)}function initialTooltip(){$('[data-toggle="tooltip"]').tooltip({delay:50});$('[data-toggle="tooltip"]').tooltip({delay:50})}function initialTooltipSiderbarUserList(){$('[data-toggle="tooltip"]').tooltip({delay:50})}function deinitialTooltipSiderbarUserList(){$('[data-toggle="tooltip"]').tooltip("dispose")}function stickersTab(){setTimeout(function(){$(".stickers ul.tabs").tabs();$(".stickers ul.tabs").css({height:"55px"})},1)}function hideStickerBox(){$("#main-chat .chat-single-box .icons").removeClass("show");$("#main-chat .chat-single-box .icons").find(".smiles-set").removeAttr("style")}function hideMinimizedBox(){if($("#main-chat .boxs .minimized").hasClass("show")){$("#main-chat .boxs .minimized").removeClass("show");$("#main-chat .boxs .minimized").find(".dropdown").removeAttr("style")}}function NewMessage(a){$("#main-chat .chat-box .boxs .chat-single-box").each(function(){if($(this).data("id")==a){$(this).addClass("new-message")}})}function generatePlaceholder(){setTimeout(function(){$("#main-chat .textarea").each(function(){$(this).html(placeholder.format($(this).data("placeholder")))})},10)}function sidebarClosed(){var a=$(window).width();if(a<1100){$("#main-chat").addClass("sidebar-closed")}else{$("#main-chat").removeClass("sidebar-closed")}}String.prototype.format=String.prototype.f=function(){var b=this,a=arguments.length;while(a--){b=b.replace(new RegExp("\\{"+a+"\\}","gm"),arguments[a])}return b};$(document).on("click","#main-chat .chat-single-box .smile-ico",function(a){a.stopPropagation();hideMinimizedBox();_parent=$(this).parents(".icons");if(_parent.hasClass("show")){hideStickerBox(_parent)}else{_bottom=parseInt(_parent.css("height").replace("px",""),0)+10;_source=_parent.data("source");_parent.find(".smiles-set").html($("."+_source).html());_parent.find(".smiles-set").css({bottom:_bottom,display:"block"});_parent.addClass("show");stickersTab()}});$(document).on("click","#main-chat .chat-single-box .stickers",function(a){a.stopPropagation()});$(document).on("click","#main-chat .preview-image",function(){preview='<div class="preview-overlay"><div class="preview-placeholder"><img class="preview-image" src="{0}"/><div class="preview-caption">{1}</div></div></div>';imgSrc=$(this).attr("src");caption=$(this).data("caption");imgWidth=$(this).css("width");imgHeight=$(this).css("height");if($("#main-chat").hasClass("preview-placeholder")){return}$("#main-chat").prepend(preview.format(imgSrc,caption));var j=$(".preview-placeholder .preview-image");var d=window.innerWidth;var b=window.innerHeight;var c=j.width();var f=j.height();var g=0;var i=c/d;var h=f/b;var e=0;var a=0;if(i>h){g=f/c;e=d*0.9;a=d*0.9*g}else{g=c/f;e=(b*0.9)*g;a=b*0.9}var l=$(document).scrollLeft()+d/2-j.parent(".preview-placeholder").offset().left-e/2;var k=$(document).scrollTop()+b/2-j.parent(".preview-placeholder").offset().top-a/2;$(".preview-placeholder").css({"max-width":e,width:c,top:k});$(".preview-caption").css({top:(a)})});$(document).on("click",'#main-chat .preview-overlay:not(".preview-placeholder")',function(){$(".preview-overlay").remove()});$(document).on("click","#main-chat .chat-single-box .stickers .tab-content li",function(){_sendMsg=$(this).parents(".chat-footer").find(".send-message div");_img=$(this).html();if($(this).parents(".chat-footer").find(".send-message div").html()=='<span class="placeholder">{0}</span>'.format(_sendMsg.data("placeholder"))){_sendMsg.html(_img)}else{_str=_sendMsg.html();_sendMsg.html(_str+" "+_img)}});$(document).on("click","#main-chat #paper-btn",function(b){var a=$(this).parents(".chat-single-box").find(".messages");var c=$($(b.currentTarget).parent().parent().parent()).find(".input-value").val();a.append('<div class="message out no-avatar media"><div class="body media-body text-right p-l-50"><div class="content msg-reply f-12 bg-primary d-inline-block">'+c+'</div><div class="seen"><i class="icon-clock f-12 m-r-5 txt-muted d-inline-block"></i><span><p class="d-inline-block">a few seconds ago </p></span><div class="clear"></div> </div></div> <div class="sender media-right friend-box"><a href="javascript:void(0);" title="Me"><img src="assets/images/avatar-1.jpg" class=" img-chat-profile" alt="Me"></a> </div></div>');hideStickerBox();messageScroll();$($(b.currentTarget).parent().parent().parent()).find(".input-value").val("");return false});$(document).on("click",function(){hideStickerBox();hideMinimizedBox()});